<!--
This file defines the Doctrine mapping between the Pelagos\Entity\Account
entity class and the account view in the postgres database.
Properties that are inherited from Pelagos\Entity\Person are mapped in
Pelagos.Entity.Person.dcm.xml
-->

<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                        http://raw.github.com/doctrine/doctrine2/master/doctrine-mapping.xsd">

    <entity name="Pelagos\Entity\Account" table="account">

        <id name="person" association-key="true" />

        <field name="userId"                column="user_id"        type="string" />

        <field name="passwordHash"          column="password"       type="blob"   />

        <field name="passwordHashAlgorithm" column="hash_algorithm" type="string" />

        <field name="passwordHashSalt"      column="salt"           type="blob"   />

        <one-to-one field="person" target-entity="Person" inversed-by="account">
            <join-column name="person_number" referenced-column-name="person_number" />
        </one-to-one>

    </entity>

</doctrine-mapping>
