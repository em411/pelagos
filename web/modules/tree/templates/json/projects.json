[
{% for project in projects %}
    {
        "data": {
            "title": "{{project.Title | raw}}{% if project.dataset_count %} <span style='color:black;font-weight:bold;'>({{project.dataset_count}})</span>{% endif %}",
            "attr": {
                "style": "color:{{tree.project_color}}",
                "href": "{{tree.project_link | evaluate}}"
            }
        },
        "attr": {
            {% if project.SubTasks > 0 %}
                {% if not peopleId or project.ProjectLevelAssoc %}
                    "id": "tasks_projectId_{{project.ID}}"
                {% else %}
                    "id": "tasks_projectId_peopleId_{{project.ID}}_{{peopleId}}"
                {% endif %}
            {% else %}
            "id": "datasets_projectId_{{project.ID}}"
            {% endif %}
        }
        {% if project.SubTasks > 0 and tree.max_depth > 1 or project.SubTasks == 0 and tree.max_depth > 2 %}
            ,
            {% if project.SubTasks > 0 and tree.expand_to_depth > 1 or project.SubTasks == 0 and tree.expand_to_depth > 2 %}
                "state": "open"
            {% else %}
                "state": "closed"
            {% endif %}
        {% endif %}
    }
    {% if not loop.last %}
    ,
    {% endif %}
{% endfor %}
]
