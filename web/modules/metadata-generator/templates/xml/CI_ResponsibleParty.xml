<gmd:CI_ResponsibleParty>
    {% if RP[RPType].FirstName or RP[RPType].LastName %}
        <gmd:individualName>
            <gco:CharacterString>{{RP[RPType].FirstName}} {{RP[RPType].LastName}}</gco:CharacterString>
        </gmd:individualName>
    {% endif %}
    {% if RP[RPType].Institution_Name %}
        <gmd:organisationName>
            <gco:CharacterString>{{RP[RPType].Institution_Name}}</gco:CharacterString>
        </gmd:organisationName>
    {% endif %}
    {% if RP[RPType].Position %}
        <gmd:positionName>
            <gco:CharacterString>{{RP[RPType].Position}}</gco:CharacterString>
        </gmd:positionName>
    {% else %}
        <gmd:positionName/>
    {% endif %}
    <gmd:contactInfo>
        <gmd:CI_Contact>
            {% if RP[RPType].Phone or RP[RPType].Fax %}
                <gmd:phone>
                    <gmd:CI_Telephone>
                        {% if RP[RPType].Phone %}
                            <gmd:voice>
                                <gco:CharacterString>{{RP[RPType].Phone}}</gco:CharacterString>
                            </gmd:voice>
                        {% endif %}
                        {% if RP[RPType].Fax %}
                            <gmd:facsimile>
                                <gco:CharacterString>{{RP[RPType].Fax}}</gco:CharacterString>
                            </gmd:facsimile>
                        {% endif %}
                    </gmd:CI_Telephone>
                </gmd:phone>
            {% endif %}
            <gmd:address>
                <gmd:CI_Address>
                    {% if RP[RPType].Department_Addr1 %}
                        <gmd:deliveryPoint>
                            <gco:CharacterString>
                                <![CDATA[{{RP[RPType].Department_Addr1 | trim}}{% if RP[RPType].Department_Addr2 %}{{"\n" ~ RP[RPType].Department_Addr2 | trim}}{% endif %}]]>
                            </gco:CharacterString>
                        </gmd:deliveryPoint>
                    {% elseif RP[RPType].Institution_Addr1 %}
                        <gmd:deliveryPoint>
                            <gco:CharacterString>
                                <![CDATA[{{RP[RPType].Institution_Addr1 | trim}}{% if RP[RPType].Institution_Addr2 %}{{"\n" ~ RP[RPType].Institution_Addr2 | trim}}{% endif %}]]>
                            </gco:CharacterString>
                        </gmd:deliveryPoint>
                    {% elseif RP[RPType].Street1 %}
                        <gmd:deliveryPoint>
                            <gco:CharacterString>
                                <![CDATA[{{RP[RPType].Street1 | trim}}{% if RP[RPType].Street2 %}{{"\n" ~ RP[RPType].Street2 | trim}}{% endif %}]]>
                            </gco:CharacterString>
                        </gmd:deliveryPoint>
                    {% else %}
                        <gmd:deliveryPoint />
                    {% endif %}
                    {% if RP[RPType].Department_City %}
                        <gmd:city>
                            <gco:CharacterString>{{RP[RPType].Department_City}}</gco:CharacterString>
                        </gmd:city>
                    {% elseif RP[RPType].Institution_City %}
                        <gmd:city>
                            <gco:CharacterString>{{RP[RPType].Institution_City}}</gco:CharacterString>
                        </gmd:city>
                    {% elseif RP[RPType].City %}
                        <gmd:city>
                            <gco:CharacterString>{{RP[RPType].City}}</gco:CharacterString>
                        </gmd:city>
                    {% else %}
                        <gmd:city />
                    {% endif %}
                    {% if RP[RPType].Department_State %}
                        <gmd:administrativeArea>
                            <gco:CharacterString>{{RP[RPType].Department_State}}</gco:CharacterString>
                        </gmd:administrativeArea>
                    {% elseif RP[RPType].Institution_State %}
                        <gmd:administrativeArea>
                            <gco:CharacterString>{{RP[RPType].Institution_State}}</gco:CharacterString>
                        </gmd:administrativeArea>
                    {% elseif RP[RPType].State %}
                        <gmd:administrativeArea>
                            <gco:CharacterString>{{RP[RPType].State}}</gco:CharacterString>
                        </gmd:administrativeArea>
                    {% else %}
                        <gmd:administrativeArea />
                    {% endif %}
                    {% if RP[RPType].Department_Zip %}
                        <gmd:postalCode>
                            <gco:CharacterString>{{RP[RPType].Department_Zip}}</gco:CharacterString>
                        </gmd:postalCode>
                    {% elseif RP[RPType].Institution_Zip %}
                        <gmd:postalCode>
                            <gco:CharacterString>{{RP[RPType].Institution_Zip}}</gco:CharacterString>
                        </gmd:postalCode>
                    {% elseif RP[RPType].PostalCode %}
                        <gmd:postalCode>
                            <gco:CharacterString>{{RP[RPType].PostalCode}}</gco:CharacterString>
                        </gmd:postalCode>
                    {% else %}
                        <gmd:postalCode />
                    {% endif %}
                    {% if RP[RPType].Department_Country %}
                        <gmd:country>
                            <gco:CharacterString>{{RP[RPType].Department_Country}}</gco:CharacterString>
                        </gmd:country>
                    {% elseif RP[RPType].Institution_Country %}
                        <gmd:country>
                            <gco:CharacterString>{{RP[RPType].Institution_Country}}</gco:CharacterString>
                        </gmd:country>
                    {% elseif RP[RPType].Country %}
                        <gmd:country>
                            <gco:CharacterString>{{RP[RPType].Country}}</gco:CharacterString>
                        </gmd:country>
                    {% else %}
                        <gmd:country />
                    {% endif %}
                    {% if RP[RPType].Email %}
                        <gmd:electronicMailAddress>
                            <gco:CharacterString>{{RP[RPType].Email}}</gco:CharacterString>
                        </gmd:electronicMailAddress>
                    {% else %}
                        <gmd:electronicMailAddress />
                    {% endif %}
                </gmd:CI_Address>
            </gmd:address>
            {% if RP[RPType].WebsiteURL %}
                <gmd:onlineResource>
                    <gmd:CI_OnlineResource>
                        <gmd:linkage>
                            <gmd:URL>{{RP[RPType].WebsiteURL}}</gmd:URL>
                        </gmd:linkage>
                        {% if RP[RPType].WebsiteProtocol %}
                            <gmd:protocol>
                                <gco:CharacterString>{{RP[RPType].WebsiteProtocol}}</gco:CharacterString>
                            </gmd:protocol>
                        {% endif %}
                    </gmd:CI_OnlineResource>
                </gmd:onlineResource>
            {% endif %}
        </gmd:CI_Contact>
    </gmd:contactInfo>
    <gmd:role>
        {% if RP[RPType].RoleCode %}
            <gmd:CI_RoleCode codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_RoleCode" codeListValue="{{RP[RPType].RoleCode.Name}}" codeSpace="{{RP[RPType].RoleCode.DomainCode}}">{{RP[RPType].RoleCode.Name}}</gmd:CI_RoleCode>
        {% endif %}
    </gmd:role>
</gmd:CI_ResponsibleParty>
