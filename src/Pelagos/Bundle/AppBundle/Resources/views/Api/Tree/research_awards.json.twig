[
    {% for fundingOrg in fundingOrgs %}
        {
            "text": "{{fundingOrg.getName}}",
            "li_attr": {
                "style": "color:{{tree.rfp_color}}"
            },
            "state" : {
                "opened": "true"
            },
            "children": [
                {% set fundingCycles = [] %}
                {% for fundingCycle in fundingOrg.getFundingCycles if fundingCycleIds|length == 0 or fundingCycle.id in fundingCycleIds %}
                    {% set fundingCycles = fundingCycles|merge([fundingCycle]) %}
                {% endfor %}
                {% for fundSrc in fundingCycles %}
                    {
                        "id" : "projects_funding-cycle_{{fundSrc.getId}}",
                        "text": "{{fundSrc.getName}}",
                        "li_attr": {
                            "style": "color:{{tree.rfp_color}}"
                        },
                        "a_attr": {
                            "id": "projects_funding-cycle_{{fundSrc.getId}}",
                            "action": "{{tree.rfp_action | evaluate}}"
                        }
                        {% if tree.max_depth > 1 %}
                            ,
                            "state" : {
                            {% if tree.expand_to_depth > 1 %}
                                "opened": "true"
                            {% else %}
                                "opened": "false"
                            {% endif %}
                            }
                        {% endif %}
                    }
                    {% if not loop.last %}
                        ,
                    {% endif %}
                {% endfor %}
            ]
            {% if tree.max_depth > 0 %}
                ,
                "state" : {
                    "opened": "true"
                }
            {% endif %}
        }
        {% if not loop.last %}
            ,
        {% endif %}
    {% endfor %}
    {% if not fundingOrgs %}
        {
            "text": "no datasets found",
            "li_attr": {
                "style": "color:red"
            },
            "a_attr": {
                "id": "noDatasetsFound"
            }
        }
    {% endif %}
]
