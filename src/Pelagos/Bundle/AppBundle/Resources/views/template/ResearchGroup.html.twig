{% extends "PelagosAppBundle:template:UI.html.twig" %}

{% block head %}
    {{ parent() }}
    {% javascripts '@PelagosAppBundle/Resources/public/js/ResearchGroup.js' %}
        {{ add_js(asset_url) }}
    {% endjavascripts %}

    {% javascripts '@PelagosAppBundle/Resources/public/js/entity/ResearchGroup.js' %}
        {{ add_js(asset_url) }}
    {% endjavascripts %}
{% endblock %}

{% block body %}
    <div>
        <table border="0" width="100%">
            <tr>
                <td width="25%" valign="top">
                    <div id="researchGroupLogo">
                        {% if ResearchGroup.getLogo %}
                        <img src="data:{{ResearchGroup.serializeBinary(ResearchGroup.getLogo).mimeType}};base64,{{ResearchGroup.serializeBinary(ResearchGroup.getLogo).base64}}">
                        {% endif %}
                    </div>
                </td>
                <td style="padding:10px;" width="50%" valign="top">
                    <div id="orgdetails">
                        <h2>Research Group Details</h2>
                        {% include '@templates/forms/ResearchGroup.html.twig' %}
                    </div>
                </td>
                <td width="25%" valign="top">
                    <div id="leadership">
                        {% include '@templates/PersonResearchGroupLeadership.html.twig' %}
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <br>
    <div id="tabs" style="width:100%">
        <ul>
            <li><a href="#tabs-1">People</a></li>
            <li><a href="#tabs-2">Datasets</a></li>
        </ul>
        <div id="tabs-1">
            <table border="0" width="100%">
            {% if PersonResearchGroups | length > 0 %}
                {% for PersonResearchGroup in PersonResearchGroups | sortBy(["role.weight","person.lastName","person.firstName"])%}
                    <tr>
                        <td>
                            <div>
                                <p>
                                    {% include '@templates/forms/PersonResearchGroup.html.twig' with {'PersonResearchGroup': PersonResearchGroup, 'form' : PersonResearchGroupForms[PersonResearchGroup.getId]}%}
                                </p>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            {% endif %}
            {% if newResearchGroupPerson is defined and is_granted('CAN_CREATE', newResearchGroupPerson) %}
                <tr>
                    <td>
                        <div class="addForm">
                            <p>
                                {% include '@templates/forms/PersonResearchGroup.html.twig' with {'PersonResearchGroup': newResearchGroupPerson, 'form' : newResearchGroupPersonForm, 'addForm' : true }%}
                            </p>
                        </div>
                    </td>
                </tr>
                {% endif %}
            </table>
        </div>
    </div>
{% endblock %}